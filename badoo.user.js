// ==UserScript==
// @name badoo-autolike
// @author ravilushqa
// @include https://badoo.com/*
// @include https://*.badoo.com/*
// @include http://badoo.com/*
// @include http://*.badoo.com/*
// @downloadURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @namespace https://github.com/ravilushqa/badoo-autolike
// @updateURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @version 8
// ==/UserScript==

var code = atob("d2luZG93Lm9wZW5lciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcGVuZXIiKSB8fCAi0J/RgNC40LLQtdGCISDQn9C+0LfQvdCw0LrQvtC80LjQvNGB0Y8/IDspIjsNCg0Kd2luZG93LmJvdCA9IHsNCglnZXRDaGF0OiBmdW5jdGlvbihpZCl7DQoJCXZhciB1cmwgPSAiL2FwaS5waHRtbD9TRVJWRVJfT1BFTl9NRVNTRU5HRVIiOw0KDQoJCXZhciBib2R5ID0geyJ2ZXJzaW9uIjoxLCJtZXNzYWdlX3R5cGUiOjQ2OCwibWVzc2FnZV9pZCI6NDEsImJvZHkiOlt7Im1lc3NhZ2VfdHlwZSI6NDY4LCJzZXJ2ZXJfb3Blbl9tZXNzZW5nZXIiOnsiY29udGFjdHNfdXNlcl9maWVsZF9maWx0ZXIiOnsicHJvamVjdGlvbiI6WzMzMCwyMDAsNzAwLDU4MCw2NDAsNjAwLDYxMCwyNTAsMzQwLDI4MCwyMzAsNjUwLDgwMCw1MDFdLCJwcm9maWxlX3Bob3RvX3NpemUiOnsic3F1YXJlX2ZhY2VfcGhvdG9fc2l6ZSI6eyJ3aWR0aCI6MTAwLCJoZWlnaHQiOjEwMH19fSwiY2hhdF91c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbMzMwLDMzMSwyMDAsNzAwLDU4MCw2NDAsNjAwLDYxMCwyNTAsMzQwLDI4MCwyOTAsMjkxLDMxMCwzMDEsMzAyLDY4MCwzMDMsMzA0LDIxMCwyMzAsNzMxLDY1MCw1NzBdLCJwcm9maWxlX3Bob3RvX3NpemUiOnsic3F1YXJlX2ZhY2VfcGhvdG9fc2l6ZSI6eyJ3aWR0aCI6MzAwLCJoZWlnaHQiOjMwMH19fSwiaW5pdGlhbF9zY3JlZW5fdXNlcl9maWVsZF9maWx0ZXIiOnsicHJvamVjdGlvbiI6WzQxMCw0OTAsNDcxLDgwMF0sInVuaXRlZF9mcmllbmRzX2ZpbHRlciI6W3sic2VjdGlvbl90eXBlIjoxfV19LCJ1c2VyX2lkIjppZH19XX07DQoNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCWJvdC5fc2VuZFJlcXVlc3QodXJsLCBib2R5KS50aGVuKGZ1bmN0aW9uKGNoYXQpew0KCQkJCWNoYXQgPSBjaGF0LmJvZHlbMF0uY2xpZW50X29wZW5fbWVzc2VuZ2VyLmFjdGl2ZV9jaGF0LmluaXRpYWxfY2hhdF9zY3JlZW47DQoNCgkJCQlyZXNvbHZlKGNoYXQgIT0gdW5kZWZpbmVkICYmIGNoYXQudHlwZSA9PSAyKTsNCgkJCX0pOw0KCQl9KTsNCgkJcmV0dXJuIHByb21pc2U7DQoJfSwNCglzZW5kTWVzc2FnZTogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX1NFTkRfQ0hBVF9NRVNTQUdFIjsNCg0KCQl2YXIgYm9keSA9IHsidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjoxMDQsIm1lc3NhZ2VfaWQiOjE0LCJib2R5IjpbeyJtZXNzYWdlX3R5cGUiOjEwNCwiY2hhdF9tZXNzYWdlIjp7Im1zc2ciOndpbmRvdy5vcGVuZXIsIm1lc3NhZ2VfdHlwZSI6MSwidWlkIjoiMTQ4NDE4Nzk3ODUyMCIsImZyb21fcGVyc29uX2lkIjoiMjI3NTYyMjI0IiwidG9fcGVyc29uX2lkIjppZCwicmVhZCI6ZmFsc2UsImNoYXRfYmxvY2tfaWQiOjJ9fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQlyZXNvbHZlKHRydWUpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KCWdldFVzZXI6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUiI7DQoNCgkJdmFyIGJvZHkgPSB7IiRncGIiOiJiYWRvby5ibWEuQmFkb29NZXNzYWdlIiwidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo0MDMsIm1lc3NhZ2VfaWQiOjYsImJvZHkiOlt7IiRncGIiOiJiYWRvby5ibWEuTWVzc2FnZUJvZHkiLCJtZXNzYWdlX3R5cGUiOjQwMywic2VydmVyX2dldF91c2VyIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0VXNlciIsInVzZXJfaWQiOmlkLCJjbGllbnRfc291cmNlIjoyLCJ1c2VyX2ZpZWxkX2ZpbHRlciI6eyIkZ3BiIjoiYmFkb28uYm1hLlVzZXJGaWVsZEZpbHRlciIsInByb2plY3Rpb24iOls4MDAsMzcwLDIwMCwyMzAsMjEwLDMwLDM2MCw5MywzMDEsMzAyLDY4MCwzMDMsMzA0LDI1MCw2MDAsMjkwLDI5MSw2MTAsMzEwLDY5MCw2OTEsNjkyLDY5Myw0NDAsMzExLDQ5MCw2NjAsNjUwLDQ2MCw3NTAsNzMxLDczMCwxMDAsMzQwLDU4MCw1NzAsNDEwLDQyMCw0ODAsOTAsNDcwLDc0Miw3NDEsNzQwLDU1MCw2ODEsNjcwLDg3MCwzMzAsMzMxLDI2MCw1MzAsNTQwXSwicmVxdWVzdF9hbGJ1bXMiOlt7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0QWxidW0iLCJwcmV2aWV3X3NpemUiOnsiJGdwYiI6ImJhZG9vLmJtYS5QaG90b1NpemUiLCJoZWlnaHQiOjE4MCwid2lkdGgiOjE4MH0sImFsYnVtX3R5cGUiOjJ9LHsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJHZXRBbGJ1bSIsInByZXZpZXdfc2l6ZSI6eyIkZ3BiIjoiYmFkb28uYm1hLlBob3RvU2l6ZSIsImhlaWdodCI6MTgwLCJ3aWR0aCI6MTgwfSwiYWxidW1fdHlwZSI6NH1dLCJ1bml0ZWRfZnJpZW5kc19maWx0ZXIiOlt7IiRncGIiOiJiYWRvby5ibWEuVW5pdGVkRnJpZW5kc0ZpbHRlciIsImNvdW50Ijo1LCJzZWN0aW9uX3R5cGUiOjN9LHsiJGdwYiI6ImJhZG9vLmJtYS5Vbml0ZWRGcmllbmRzRmlsdGVyIiwiY291bnQiOjUsInNlY3Rpb25fdHlwZSI6MX0seyIkZ3BiIjoiYmFkb28uYm1hLlVuaXRlZEZyaWVuZHNGaWx0ZXIiLCJjb3VudCI6NSwic2VjdGlvbl90eXBlIjoyfV0sInJlcXVlc3RfaW50ZXJlc3RzIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVySW50ZXJlc3RzR2V0IiwidXNlcl9pZCI6aWQsImxpbWl0Ijo1MDB9fSwidmlzaXRpbmdfc291cmNlIjp7IiRncGIiOiJiYWRvby5ibWEuUHJvZmlsZVZpc2l0aW5nU291cmNlIiwicGVyc29uX2lkIjppZCwic291cmNlX2ZvbGRlciI6MjUsInZpc2l0aW5nX3NvdXJjZSI6Mn19fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQl1c2VyID0gdXNlci5ib2R5WzBdLnVzZXI7DQoNCgkJCQlyZXNvbHZlKHVzZXIpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJZ2V0VXNlcnM6IGZ1bmN0aW9uKHBhZ2UgPSAwKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUl9MSVNUX1dJVEhfU0VUVElOR1MiOw0KDQoJCWJvZHkgPSB7InZlcnNpb24iOjEsIm1lc3NhZ2VfdHlwZSI6NDE2LCJtZXNzYWdlX2lkIjoyNCwiYm9keSI6W3sibWVzc2FnZV90eXBlIjo1MDIsInNlcnZlcl9nZXRfc2VhcmNoX3NldHRpbmdzIjp7ImNvbnRleHRfdHlwZSI6Mn19LHsibWVzc2FnZV90eXBlIjoyNDUsInNlcnZlcl9nZXRfdXNlcl9saXN0Ijp7ImZvbGRlcl9pZCI6MjUsInVzZXJfZmllbGRfZmlsdGVyIjp7InByb2plY3Rpb24iOlsyNTAsMjAwLDIxMCwyMzAsMzEwLDMzMCw1MzAsNTQwLDM0MCwzMzEsNjgwLDI5MCwyOTEsMzAxLDMwMywzMDQsMzAyLDI2MF0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjoxODAsImhlaWdodCI6MTgwfX19LCJvZmZzZXQiOnBhZ2UqMTAwLCJwcmVmZXJyZWRfY291bnQiOjEwMCwicHJvbW9fYmxvY2tfcmVxdWVzdF9wYXJhbXMiOlt7ImNvdW50IjoxLCJwb3NpdGlvbiI6Mn0seyJjb3VudCI6MSwicG9zaXRpb24iOjF9XSwiZmlsdGVyIjpbMF19fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2Vycyl7DQoJCQkJdmFyIHBhZ2VfY291bnQgPSB1c2Vycy5ib2R5WzFdLmNsaWVudF91c2VyX2xpc3QudG90YWxfY291bnQgLyAxMDA7DQoJCQkJdXNlcnMgPSB1c2Vycy5ib2R5WzFdLmNsaWVudF91c2VyX2xpc3Quc2VjdGlvblswXS51c2VyczsNCg0KCQkJCWlmKHBhZ2UgPT0gMCl7DQoJCQkJCXByb21pc2VzID0gW107DQoNCgkJCQkJZm9yKGkgPSAxOyBpIDwgcGFnZV9jb3VudDsgaSsrKXsNCgkJCQkJCXByb21pc2VzLnB1c2goYm90LmdldFVzZXJzKGkpKTsNCgkJCQkJfQ0KDQoJCQkJCVByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKG1vcmVfdXNlcnMpew0KCQkJCQkJbW9yZV91c2Vycy5mb3JFYWNoKGZ1bmN0aW9uKG1vcmVfdXNlcnNfdW5pdCl7DQoJCQkJCQkJdXNlcnMgPSB1c2Vycy5jb25jYXQobW9yZV91c2Vyc191bml0KTsNCgkJCQkJCX0pOw0KDQoJCQkJCQlyZXNvbHZlKHVzZXJzKTsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXJlc29sdmUodXNlcnMpOw0KCQkJCX0NCgkJCX0pOw0KCQl9KTsNCg0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJdm90ZTogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX0VOQ09VTlRFUlNfVk9URSI7DQoNCgkJdmFyIGJvZHkgPSB7IiRncGIiOiJiYWRvby5ibWEuQmFkb29NZXNzYWdlIiwidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo4MCwibWVzc2FnZV9pZCI6NTYsImJvZHkiOlt7IiRncGIiOiJiYWRvby5ibWEuTWVzc2FnZUJvZHkiLCJtZXNzYWdlX3R5cGUiOjgwLCJzZXJ2ZXJfZW5jb3VudGVyc192b3RlIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyRW5jb3VudGVyc1ZvdGUiLCJwZXJzb25faWQiOmlkLCJ2b3RlIjoyLCJ2b3RlX3NvdXJjZSI6NjV9fV19Ow0KDQoJCXJldHVybiB0aGlzLl9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpOw0KCX0sDQoNCglfc2VuZFJlcXVlc3QodXJsLCBib2R5KXsNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCgkJCXhoci5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTsNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnanNvbicpOw0KDQoJCQl4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1TZXNzaW9uLWlkJywgQi5TZXNzaW9uLmdldFNlc3Npb25JZCgpKTsNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVVzZXItaWQnLCBCLlNlc3Npb24uZ2V0VXNlcklkKCkpOw0KDQoJCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKGZ1bmN0aW9uKCkgew0KCQkJCWlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7DQoJCQkJCXJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7DQoJCQkJfQ0KCQkJfSk7DQoNCgkJCXhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGJvZHkpKTsNCgkJfSk7DQoNCgkJcmV0dXJuIHByb21pc2U7DQoJfSwNCg0KCWFkZE1lbnVJdGVtOiBmdW5jdGlvbih0ZXh0LCBpY29uLCBib3RGdW5jdGlvbk5hbWUpIHsNCgkJdmFyIGh0bWwgPSAnXA0KCQkgICAgPGRpdiBvbmNsaWNrPSJ3aW5kb3cuYm90Lnt7Ym90RnVuY3Rpb25OYW1lfX0oKTsiIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXIiIGNsYXNzPSJzaWRlYmFyLW1lbnVfX2l0ZW0gZnJpZW5kc18iPlwNCgkJCQk8aSBjbGFzcz0iaWNvbiBpY29uLS14c20iPlwNCgkJCQkJPHN2ZyBjbGFzcz0iaWNvbi1zdmciPjx1c2UgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhsaW5rOmhyZWY9Int7aWNvbn19Ij48L3VzZT48L3N2Zz5cDQoJCQkJCTxzcGFuIGNsYXNzPSJtYXJrIG1hcmstLXNtIG1hcmstLXJlZCBpbnZpc2libGUiPjA8L3NwYW4+XA0KCQkJCTwvaT5cDQoJCQkJPGIgY2xhc3M9InNpZGViYXItbWVudV9faXRlbS10eHQgc2lkZWJhcl9fZWwtaGlkZGVuIj57e3RleHR9fTwvYj5cDQoJCQkJPHNwYW4gY2xhc3M9Im1hcmsgbWFyay0tcmVkIGludmlzaWJsZSI+MDwvc3Bhbj5cDQoJCQk8L2Rpdj4nOw0KDQoJCWh0bWwgPSBodG1sDQoJCQkucmVwbGFjZSgne3tib3RGdW5jdGlvbk5hbWV9fScsIGJvdEZ1bmN0aW9uTmFtZSkNCgkJCS5yZXBsYWNlKCd7e2ljb259fScsIGljb24pDQoJCQkucmVwbGFjZSgne3t0ZXh0fX0nLCB0ZXh0KTsNCg0KCQl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KCQllbGVtZW50LmlubmVySFRNTCA9IGh0bWw7DQoNCgkJdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzaWRlYmFyLW1lbnUiKVswXTsNCgkJbWVudS5hcHBlbmRDaGlsZChlbGVtZW50KTsNCgl9LA0KDQoJc2V0T3BlbmVyOiBmdW5jdGlvbigpew0KCQl2YXIgb3BlbmVyID0gcHJvbXB0KCJPcGVuZXI/ICIsIHdpbmRvdy5vcGVuZXIpOw0KDQoJCXdpbmRvdy5vcGVuZXIgPSBvcGVuZXI7DQoJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcGVuZXIiLCBvcGVuZXIpOw0KCX0sDQoNCgltYXNzTGlrZTogZnVuY3Rpb24oKXsNCgkJYm90LmdldFVzZXJzKCkudGhlbihmdW5jdGlvbihkYXRhKXsNCgkJCXVzZXJzID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24odXNlcikgew0KCQkJCXJldHVybiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPT0gItCR0YvQu9CwINC+0L3Qu9Cw0LnQvSDQsdC+0LvRjNGI0LUg0L3QtdC00LXQu9C4INC90LDQt9Cw0LQiDQoJCQkJCSYmIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9PSAi0JHRi9C70LAg0L7QvdC70LDQudC9INCx0L7Qu9GM0YjQtSDQvNC10YHRj9GG0LAg0L3QsNC30LDQtCINCgkJCQkJJiYgdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT09ICJXYXMgb25saW5lIG1vcmUgdGhhbiBhIHdlZWsgYWdvIg0KCQkJCQkmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPT0gIldhcyBvbmxpbmUgbW9yZSB0aGFuIGEgbW9udGggYWdvIjsNCgkJCX0pOw0KDQoJCQl1c2VycyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyKXtyZXR1cm4gdXNlci51c2VyX2lkfSk7DQoNCgkJCXVzZXJzID0gdXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpew0KCQkJCWlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyLSIrdXNlcikgIT0gdW5kZWZpbmVkKXsNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCX0NCg0KCQkJCXJldHVybiB0cnVlOw0KCQkJfSk7DQoNCgkJCXVzZXJzID0gdXNlcnMuc2xpY2UoMCwgMTAwKTsNCg0KCQkJdmFyIHVzZXJEZXRhaWxzUHJvbWlzZXMgPSB1c2Vycy5tYXAoZnVuY3Rpb24odXNlcl9pZCl7DQoJCQkJcmV0dXJuIGJvdC5nZXRVc2VyKHVzZXJfaWQpOw0KCQkJfSk7DQoNCgkJCVByb21pc2UuYWxsKHVzZXJEZXRhaWxzUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24odXNlcnMpew0KCQkJCXZhciBjYXB0Y2hhID0gZmFsc2U7DQoNCgkJCQl1c2VycyA9IHVzZXJzLmZpbHRlcihmdW5jdGlvbih1c2VyKXsNCgkJCQkJaWYodXNlciA9PSB1bmRlZmluZWQpew0KCQkJCQkJY2FwdGNoYSA9IHRydWU7DQoJCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJCX0NCgkJCQkJZWxzZSBpZih1c2VyLm15X3ZvdGUgPT0gMSl7DQoJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyLSIgKyB1c2VyLnVzZXJfaWQsIHRydWUpOw0KDQoJCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJCX0NCgkJCQl9KTsNCg0KCQkJCWlmKGNhcHRjaGEpew0KCQkJCQlhbGVydCgiU29sdmUgY2FwdGNoYSEgIik7DQoJCQkJCXJldHVybjsNCgkJCQl9DQoNCgkJCQljb25zb2xlLmxvZyh1c2Vycy5sZW5ndGggKyAiIHVzZXJzIHRvIGxpa2UhICIpOw0KDQoJCQkJbGlrZV9wcm9taXNlcyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyKXtyZXR1cm4gYm90LnZvdGUodXNlci51c2VyX2lkKX0pOw0KDQoJCQkJUHJvbWlzZS5hbGwobGlrZV9wcm9taXNlcykudGhlbihmdW5jdGlvbihkYXRhKXsNCgkJCQkJdmFyIGxpa2VzX2NvdW50ID0gMDsNCg0KCQkJCQlkYXRhLmZvckVhY2goZnVuY3Rpb24obGlrZSwga2V5KXsNCgkJCQkJCWlmKGxpa2UuYm9keVswXS5tZXNzYWdlX3R5cGUgIT0gMSl7DQoJCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXItIiArIHVzZXJzW2tleV0udXNlcl9pZCwgdHJ1ZSk7DQoNCgkJCQkJCQlsaWtlc19jb3VudCsrOw0KCQkJCQkJfQ0KCQkJCQl9KTsNCg0KCQkJCQlhbGVydCgiTGlrZWQgIiArIGxpa2VzX2NvdW50ICsgIiB1c2VycyEgIik7DQoJCQkJfSk7DQoJCQl9KTsNCgkJfSk7DQoJfSwNCg0KCW1hc3NDaGF0OiBmdW5jdGlvbigpew0KCQlib3QuZ2V0VXNlcnMoKS50aGVuKGZ1bmN0aW9uKGRhdGEpew0KCQkJdXNlcnMgPSBkYXRhLmZpbHRlcihmdW5jdGlvbih1c2VyKXtyZXR1cm4gdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT0gIm9ubGluZV9zdGF0dXNfdGV4dCIgJiYgdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT0gItCR0YvQu9CwINC+0L3Qu9Cw0LnQvSDQsdC+0LvRjNGI0LUg0L3QtdC00LXQu9C4INC90LDQt9Cw0LQiICYmIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9ICIgV2FzIG9ubGluZSBtb3JlIHRoYW4gYSB3ZWVrIGFnbyJ9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5tYXAoZnVuY3Rpb24odXNlcil7cmV0dXJuIHVzZXIudXNlcl9pZH0pOw0KDQoJCQl2YXIgY2hhdHMgPSB1c2Vycy5tYXAoZnVuY3Rpb24oaWQpew0KCQkJCXJldHVybiBib3QuZ2V0Q2hhdChpZCk7DQoJCQl9KTsNCg0KCQkJUHJvbWlzZS5hbGwoY2hhdHMpLnRoZW4oZnVuY3Rpb24oY2hhdHMpew0KCQkJCXVzZXJzID0gdXNlcnMuZmlsdGVyKGZ1bmN0aW9uKGlkLCBrZXkpew0KCQkJCQlyZXR1cm4gY2hhdHNba2V5XTsNCgkJCQl9KTsNCg0KCQkJCWFsZXJ0KCJTZW5kaW5nIG1lc3NhZ2UgdG8gIit1c2Vycy5sZW5ndGgrIiBwZW9wbGUhICIpOw0KDQoJCQkJdXNlcnMubWFwKGZ1bmN0aW9uKGlkKXsNCgkJCQkJYm90LnNlbmRNZXNzYWdlKGlkKTsNCgkJCQl9KQ0KCQkJfSk7DQoJCX0pOw0KCX0NCn07DQoNCnZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7DQoJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic2lkZWJhci1tZW51IilbMF0gIT09IHVuZGVmaW5lZCl7DQoJCWNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOw0KCQlib3QuYWRkTWVudUl0ZW0oJ01hc3MgbGlrZScsICcjaWNvbi1oZWFydCcsICdtYXNzTGlrZScpOw0KCQlib3QuYWRkTWVudUl0ZW0oJ01hc3MgY2hhdCcsICcjaWNvbi1jaGF0JywgJ21hc3NDaGF0Jyk7DQoJCWJvdC5hZGRNZW51SXRlbSgnU2V0IG9wZW5lcicsICcjaWNvbi1jaGF0JywgJ3NldE9wZW5lcicpOw0KCX0NCn0sIDEwMDApOw0K");

location.href="javascript:(function(){" + code + "})()";
