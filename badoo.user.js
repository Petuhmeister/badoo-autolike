// ==UserScript==
// @name badoo-autolike
// @author ravilushqa
// @include https://badoo.com/*
// @include https://*.badoo.com/*
// @include http://badoo.com/*
// @include http://*.badoo.com/*
// @downloadURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @namespace https://github.com/ravilushqa/badoo-autolike
// @updateURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @version 8
// ==/UserScript==

var code = atob("d2luZG93Lm9wZW5lciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcGVuZXIiKSB8fCAiS2FrbyBvdm8gcmFkaSwgamVzbW8gbGkgc2FkIHUgdmV6aT8gOjMiOw0KDQp3aW5kb3cuYm90ID0gew0KCWdldENoYXQ6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9PUEVOX01FU1NFTkdFUiI7DQoNCgkJdmFyIGJvZHkgPSB7InZlcnNpb24iOjEsIm1lc3NhZ2VfdHlwZSI6NDY4LCJtZXNzYWdlX2lkIjo0MSwiYm9keSI6W3sibWVzc2FnZV90eXBlIjo0NjgsInNlcnZlcl9vcGVuX21lc3NlbmdlciI6eyJjb250YWN0c191c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbMzMwLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDIzMCw2NTAsODAwLDUwMV0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjoxMDAsImhlaWdodCI6MTAwfX19LCJjaGF0X3VzZXJfZmllbGRfZmlsdGVyIjp7InByb2plY3Rpb24iOlszMzAsMzMxLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDI5MCwyOTEsMzEwLDMwMSwzMDIsNjgwLDMwMywzMDQsMjEwLDIzMCw3MzEsNjUwLDU3MF0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjozMDAsImhlaWdodCI6MzAwfX19LCJpbml0aWFsX3NjcmVlbl91c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbNDEwLDQ5MCw0NzEsODAwXSwidW5pdGVkX2ZyaWVuZHNfZmlsdGVyIjpbeyJzZWN0aW9uX3R5cGUiOjF9XX0sInVzZXJfaWQiOmlkfX1dfTsNCg0KCQl2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJYm90Ll9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpLnRoZW4oZnVuY3Rpb24oY2hhdCl7DQoJCQkJY2hhdCA9IGNoYXQuYm9keVswXS5jbGllbnRfb3Blbl9tZXNzZW5nZXIuYWN0aXZlX2NoYXQuaW5pdGlhbF9jaGF0X3NjcmVlbjsNCgkJCQkNCgkJCQlyZXNvbHZlKGNoYXQgIT0gdW5kZWZpbmVkICYmIGNoYXQudHlwZSA9PSAyKTsNCgkJCX0pOw0KCQl9KTsNCgkJcmV0dXJuIHByb21pc2U7DQoJfSwNCglzZW5kTWVzc2FnZTogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX1NFTkRfQ0hBVF9NRVNTQUdFIjsNCg0KCQl2YXIgYm9keSA9IHsidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjoxMDQsIm1lc3NhZ2VfaWQiOjE0LCJib2R5IjpbeyJtZXNzYWdlX3R5cGUiOjEwNCwiY2hhdF9tZXNzYWdlIjp7Im1zc2ciOndpbmRvdy5vcGVuZXIsIm1lc3NhZ2VfdHlwZSI6MSwidWlkIjoiMTQ4NDE4Nzk3ODUyMCIsImZyb21fcGVyc29uX2lkIjoiMjI3NTYyMjI0IiwidG9fcGVyc29uX2lkIjppZCwicmVhZCI6ZmFsc2UsImNoYXRfYmxvY2tfaWQiOjJ9fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQlyZXNvbHZlKHRydWUpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KCWdldFVzZXI6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUiI7DQoNCgkJdmFyIGJvZHkgPSB7IiRncGIiOiJiYWRvby5ibWEuQmFkb29NZXNzYWdlIiwidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo0MDMsIm1lc3NhZ2VfaWQiOjYsImJvZHkiOlt7IiRncGIiOiJiYWRvby5ibWEuTWVzc2FnZUJvZHkiLCJtZXNzYWdlX3R5cGUiOjQwMywic2VydmVyX2dldF91c2VyIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0VXNlciIsInVzZXJfaWQiOmlkLCJjbGllbnRfc291cmNlIjoyLCJ1c2VyX2ZpZWxkX2ZpbHRlciI6eyIkZ3BiIjoiYmFkb28uYm1hLlVzZXJGaWVsZEZpbHRlciIsInByb2plY3Rpb24iOls4MDAsMzcwLDIwMCwyMzAsMjEwLDMwLDM2MCw5MywzMDEsMzAyLDY4MCwzMDMsMzA0LDI1MCw2MDAsMjkwLDI5MSw2MTAsMzEwLDY5MCw2OTEsNjkyLDY5Myw0NDAsMzExLDQ5MCw2NjAsNjUwLDQ2MCw3NTAsNzMxLDczMCwxMDAsMzQwLDU4MCw1NzAsNDEwLDQyMCw0ODAsOTAsNDcwLDc0Miw3NDEsNzQwLDU1MCw2ODEsNjcwLDg3MCwzMzAsMzMxLDI2MCw1MzAsNTQwXSwicmVxdWVzdF9hbGJ1bXMiOlt7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0QWxidW0iLCJwcmV2aWV3X3NpemUiOnsiJGdwYiI6ImJhZG9vLmJtYS5QaG90b1NpemUiLCJoZWlnaHQiOjE4MCwid2lkdGgiOjE4MH0sImFsYnVtX3R5cGUiOjJ9LHsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJHZXRBbGJ1bSIsInByZXZpZXdfc2l6ZSI6eyIkZ3BiIjoiYmFkb28uYm1hLlBob3RvU2l6ZSIsImhlaWdodCI6MTgwLCJ3aWR0aCI6MTgwfSwiYWxidW1fdHlwZSI6NH1dLCJ1bml0ZWRfZnJpZW5kc19maWx0ZXIiOlt7IiRncGIiOiJiYWRvby5ibWEuVW5pdGVkRnJpZW5kc0ZpbHRlciIsImNvdW50Ijo1LCJzZWN0aW9uX3R5cGUiOjN9LHsiJGdwYiI6ImJhZG9vLmJtYS5Vbml0ZWRGcmllbmRzRmlsdGVyIiwiY291bnQiOjUsInNlY3Rpb25fdHlwZSI6MX0seyIkZ3BiIjoiYmFkb28uYm1hLlVuaXRlZEZyaWVuZHNGaWx0ZXIiLCJjb3VudCI6NSwic2VjdGlvbl90eXBlIjoyfV0sInJlcXVlc3RfaW50ZXJlc3RzIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVySW50ZXJlc3RzR2V0IiwidXNlcl9pZCI6aWQsImxpbWl0Ijo1MDB9fSwidmlzaXRpbmdfc291cmNlIjp7IiRncGIiOiJiYWRvby5ibWEuUHJvZmlsZVZpc2l0aW5nU291cmNlIiwicGVyc29uX2lkIjppZCwic291cmNlX2ZvbGRlciI6MjUsInZpc2l0aW5nX3NvdXJjZSI6Mn19fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQl1c2VyID0gdXNlci5ib2R5WzBdLnVzZXI7DQoNCgkJCQlyZXNvbHZlKHVzZXIpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJZ2V0VXNlcnM6IGZ1bmN0aW9uKHBhZ2UgPSAwKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUl9MSVNUX1dJVEhfU0VUVElOR1MiOw0KDQoJCWJvZHkgPSB7InZlcnNpb24iOjEsIm1lc3NhZ2VfdHlwZSI6NDE2LCJtZXNzYWdlX2lkIjoyNCwiYm9keSI6W3sibWVzc2FnZV90eXBlIjo1MDIsInNlcnZlcl9nZXRfc2VhcmNoX3NldHRpbmdzIjp7ImNvbnRleHRfdHlwZSI6Mn19LHsibWVzc2FnZV90eXBlIjoyNDUsInNlcnZlcl9nZXRfdXNlcl9saXN0Ijp7ImZvbGRlcl9pZCI6MjUsInVzZXJfZmllbGRfZmlsdGVyIjp7InByb2plY3Rpb24iOlsyNTAsMjAwLDIxMCwyMzAsMzEwLDMzMCw1MzAsNTQwLDM0MCwzMzEsNjgwLDI5MCwyOTEsMzAxLDMwMywzMDQsMzAyLDI2MF0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjoxODAsImhlaWdodCI6MTgwfX19LCJvZmZzZXQiOnBhZ2UqMTAwLCJwcmVmZXJyZWRfY291bnQiOjEwMCwicHJvbW9fYmxvY2tfcmVxdWVzdF9wYXJhbXMiOlt7ImNvdW50IjoxLCJwb3NpdGlvbiI6Mn0seyJjb3VudCI6MSwicG9zaXRpb24iOjF9XSwiZmlsdGVyIjpbMF19fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2Vycyl7DQoJCQkJdmFyIHBhZ2VfY291bnQgPSB1c2Vycy5ib2R5WzFdLmNsaWVudF91c2VyX2xpc3QudG90YWxfY291bnQgLyAxMDA7DQoJCQkJdXNlcnMgPSB1c2Vycy5ib2R5WzFdLmNsaWVudF91c2VyX2xpc3Quc2VjdGlvblswXS51c2VyczsNCg0KCQkJCWlmKHBhZ2UgPT0gMCl7DQoJCQkJCXByb21pc2VzID0gW107DQoNCgkJCQkJZm9yKGkgPSAxOyBpIDwgcGFnZV9jb3VudDsgaSsrKXsNCgkJCQkJCXByb21pc2VzLnB1c2goYm90LmdldFVzZXJzKGkpKTsNCgkJCQkJfQ0KDQoJCQkJCVByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKG1vcmVfdXNlcnMpew0KCQkJCQkJbW9yZV91c2Vycy5mb3JFYWNoKGZ1bmN0aW9uKG1vcmVfdXNlcnNfdW5pdCl7DQoJCQkJCQkJdXNlcnMgPSB1c2Vycy5jb25jYXQobW9yZV91c2Vyc191bml0KTsNCgkJCQkJCX0pOw0KDQoJCQkJCQlyZXNvbHZlKHVzZXJzKTsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXJlc29sdmUodXNlcnMpOw0KCQkJCX0NCgkJCX0pOw0KCQl9KTsNCg0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJdm90ZTogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX0VOQ09VTlRFUlNfVk9URSI7DQoNCgkJdmFyIGJvZHkgPSB7IiRncGIiOiJiYWRvby5ibWEuQmFkb29NZXNzYWdlIiwidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo4MCwibWVzc2FnZV9pZCI6NTYsImJvZHkiOlt7IiRncGIiOiJiYWRvby5ibWEuTWVzc2FnZUJvZHkiLCJtZXNzYWdlX3R5cGUiOjgwLCJzZXJ2ZXJfZW5jb3VudGVyc192b3RlIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyRW5jb3VudGVyc1ZvdGUiLCJwZXJzb25faWQiOmlkLCJ2b3RlIjoyLCJ2b3RlX3NvdXJjZSI6NjV9fV19Ow0KDQoJCXJldHVybiB0aGlzLl9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpOw0KCX0sDQoNCglfc2VuZFJlcXVlc3QodXJsLCBib2R5KXsNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCgkJCXhoci5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTsNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnanNvbicpOw0KDQoJCQl4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1TZXNzaW9uLWlkJywgQi5TZXNzaW9uLmdldFNlc3Npb25JZCgpKTsNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVVzZXItaWQnLCBCLlNlc3Npb24uZ2V0VXNlcklkKCkpOw0KDQoJCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKGZ1bmN0aW9uKCkgew0KCQkJCWlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7DQoJCQkJCXJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7DQoJCQkJfQ0KCQkJfSk7DQoNCgkJCXhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGJvZHkpKTsNCgkJfSk7DQoNCgkJcmV0dXJuIHByb21pc2U7DQoJfSwNCg0KCWFkZE1lbnVJdGVtOiBmdW5jdGlvbih0ZXh0LCBpY29uLCBib3RGdW5jdGlvbk5hbWUpIHsNCgkJdmFyIGh0bWwgPSAnXA0KCQkgICAgPGRpdiBvbmNsaWNrPSJ3aW5kb3cuYm90Lnt7Ym90RnVuY3Rpb25OYW1lfX0oKTsiIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXIiIGNsYXNzPSJzaWRlYmFyLW1lbnVfX2l0ZW0gZnJpZW5kc18iPlwNCgkJCQk8aSBjbGFzcz0iaWNvbiBpY29uLS14c20iPlwNCgkJCQkJPHN2ZyBjbGFzcz0iaWNvbi1zdmciPjx1c2UgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhsaW5rOmhyZWY9Int7aWNvbn19Ij48L3VzZT48L3N2Zz5cDQoJCQkJCTxzcGFuIGNsYXNzPSJtYXJrIG1hcmstLXNtIG1hcmstLXJlZCBpbnZpc2libGUiPjA8L3NwYW4+XA0KCQkJCTwvaT5cDQoJCQkJPGIgY2xhc3M9InNpZGViYXItbWVudV9faXRlbS10eHQgc2lkZWJhcl9fZWwtaGlkZGVuIj57e3RleHR9fTwvYj5cDQoJCQkJPHNwYW4gY2xhc3M9Im1hcmsgbWFyay0tcmVkIGludmlzaWJsZSI+MDwvc3Bhbj5cDQoJCQk8L2Rpdj4nOw0KCQkNCgkJaHRtbCA9IGh0bWwNCgkJCS5yZXBsYWNlKCd7e2JvdEZ1bmN0aW9uTmFtZX19JywgYm90RnVuY3Rpb25OYW1lKQ0KCQkJLnJlcGxhY2UoJ3t7aWNvbn19JywgaWNvbikNCgkJCS5yZXBsYWNlKCd7e3RleHR9fScsIHRleHQpOw0KDQoJCXZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQoJCWVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsNCgkJDQoJCXZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic2lkZWJhci1tZW51IilbMF07DQoJCW1lbnUuYXBwZW5kQ2hpbGQoZWxlbWVudCk7DQoJfSwNCg0KCXNldE9wZW5lcjogZnVuY3Rpb24oKXsNCgkJdmFyIG9wZW5lciA9IHByb21wdCgiT3BlbmVyPyAiLCB3aW5kb3cub3BlbmVyKTsNCg0KCQl3aW5kb3cub3BlbmVyID0gb3BlbmVyOw0KCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3BlbmVyIiwgb3BlbmVyKTsNCgl9LA0KDQoJbWFzc0xpa2U6IGZ1bmN0aW9uKCl7DQoJCWJvdC5nZXRVc2VycygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7DQoJCQl1c2VycyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHsNCgkJCQlyZXR1cm4gdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT09ICJCaWxhIGplIG5hIG1yZcW+aSBwcmUgdmnFoWUgb2QgbmVkZWxqdSBkYW5hIg0KCQkJCQkmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPT0gIkJpbGEgamUgbmEgbXJlxb5pIHByZSB2acWhZSBvZCBtZXNlYyBkYW5hIg0KCQkJCQkmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPT0gIldhcyBvbmxpbmUgbW9yZSB0aGFuIGEgd2VlayBhZ28iDQoJCQkJCSYmIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9PSAiV2FzIG9ubGluZSBtb3JlIHRoYW4gYSBtb250aCBhZ28iOw0KCQkJfSk7DQoNCgkJCXVzZXJzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLnVzZXJfaWR9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcil7DQoJCQkJaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXItIit1c2VyKSAhPSB1bmRlZmluZWQpew0KCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5zbGljZSgwLCAxMDApOw0KDQoJCQl2YXIgdXNlckRldGFpbHNQcm9taXNlcyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyX2lkKXsNCgkJCQlyZXR1cm4gYm90LmdldFVzZXIodXNlcl9pZCk7DQoJCQl9KTsNCg0KCQkJUHJvbWlzZS5hbGwodXNlckRldGFpbHNQcm9taXNlcykudGhlbihmdW5jdGlvbih1c2Vycyl7DQoJCQkJdmFyIGNhcHRjaGEgPSBmYWxzZTsNCg0KCQkJCXVzZXJzID0gdXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpew0KCQkJCQlpZih1c2VyID09IHVuZGVmaW5lZCl7DQoJCQkJCQljYXB0Y2hhID0gdHJ1ZTsNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmKHVzZXIubXlfdm90ZSA9PSAxKXsNCgkJCQkJCXJldHVybiB0cnVlOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXItIiArIHVzZXIudXNlcl9pZCwgdHJ1ZSk7DQoNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCX0pOw0KDQoJCQkJaWYoY2FwdGNoYSl7DQoJCQkJCWFsZXJ0KCJTb2x2ZSBjYXB0Y2hhISAiKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCg0KCQkJCWNvbnNvbGUubG9nKHVzZXJzLmxlbmd0aCArICIgdXNlcnMgdG8gbGlrZSEgIik7DQoNCgkJCQlsaWtlX3Byb21pc2VzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiBib3Qudm90ZSh1c2VyLnVzZXJfaWQpfSk7DQoNCgkJCQlQcm9taXNlLmFsbChsaWtlX3Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKGRhdGEpew0KCQkJCQl2YXIgbGlrZXNfY291bnQgPSAwOw0KDQoJCQkJCWRhdGEuZm9yRWFjaChmdW5jdGlvbihsaWtlLCBrZXkpew0KCQkJCQkJaWYobGlrZS5ib2R5WzBdLm1lc3NhZ2VfdHlwZSAhPSAxKXsNCgkJCQkJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlci0iICsgdXNlcnNba2V5XS51c2VyX2lkLCB0cnVlKTsNCg0KCQkJCQkJCWxpa2VzX2NvdW50Kys7DQoJCQkJCQl9DQoJCQkJCX0pOw0KDQoJCQkJCWFsZXJ0KCJMaWtlZCAiICsgbGlrZXNfY291bnQgKyAiIHVzZXJzISAiKTsNCgkJCQl9KTsNCgkJCX0pOw0KCQl9KTsNCgl9LA0KDQoJbWFzc0NoYXQ6IGZ1bmN0aW9uKCl7DQoJCWJvdC5nZXRVc2VycygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7DQoJCQl1c2VycyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAib25saW5lX3N0YXR1c190ZXh0IiAmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAiQmlsYSBqZSBuYSBtcmXFvmkgcHJlIHZpxaFlIG9kIG5lZGVsanUgZGFuYSIgJiYgdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT0gIiBXYXMgb25saW5lIG1vcmUgdGhhbiBhIHdlZWsgYWdvIn0pOw0KDQoJCQl1c2VycyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyKXtyZXR1cm4gdXNlci51c2VyX2lkfSk7DQoNCgkJCXZhciBjaGF0cyA9IHVzZXJzLm1hcChmdW5jdGlvbihpZCl7DQoJCQkJcmV0dXJuIGJvdC5nZXRDaGF0KGlkKTsNCgkJCX0pOw0KDQoJCQlQcm9taXNlLmFsbChjaGF0cykudGhlbihmdW5jdGlvbihjaGF0cyl7DQoJCQkJdXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24oaWQsIGtleSl7DQoJCQkJCXJldHVybiBjaGF0c1trZXldOw0KCQkJCX0pOw0KDQoJCQkJYWxlcnQoIlNlbmRpbmcgbWVzc2FnZSB0byAiK3VzZXJzLmxlbmd0aCsiIHBlb3BsZSEgIik7DQoNCgkJCQl1c2Vycy5tYXAoZnVuY3Rpb24oaWQpew0KCQkJCQlib3Quc2VuZE1lc3NhZ2UoaWQpOw0KCQkJCX0pDQoJCQl9KTsNCgkJfSk7DQoJfQ0KfTsNCg0KdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsNCglpZihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzaWRlYmFyLW1lbnUiKVswXSAhPT0gdW5kZWZpbmVkKXsNCgkJY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7DQoJCWJvdC5hZGRNZW51SXRlbSgnTWFzcyBsaWtlJywgJyNpY29uLWhlYXJ0JywgJ21hc3NMaWtlJyk7DQoJCWJvdC5hZGRNZW51SXRlbSgnTWFzcyBjaGF0JywgJyNpY29uLWNoYXQnLCAnbWFzc0NoYXQnKTsNCgkJYm90LmFkZE1lbnVJdGVtKCdTZXQgb3BlbmVyJywgJyNpY29uLWNoYXQnLCAnc2V0T3BlbmVyJyk7DQoJfQ0KfSwgMTAwMCk7");

location.href="javascript:(function(){" + code + "})()";
