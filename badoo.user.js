// ==UserScript==
// @name badoo-autolike
// @author ravilushqa
// @include https://badoo.com/*
// @include https://*.badoo.com/*
// @include http://badoo.com/*
// @include http://*.badoo.com/*
// @downloadURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @namespace https://github.com/ravilushqa/badoo-autolike
// @updateURL https://raw.githubusercontent.com/ravilushqa/badoo-autolike/master/badoo.user.js
// @version 8
// ==/UserScript==

var code = atob("d2luZG93Lm9wZW5lciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcGVuZXIiKSB8fCAi0J/RgNC40LLQtdGCISDQp9C10Lwg0LfQsNC90LjQvNCw0LXRiNGM0YHRjz8gOykiOw0KDQp3aW5kb3cuYm90ID0gew0KCWdldENoYXQ6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9PUEVOX01FU1NFTkdFUiI7DQoNCgkJdmFyIGJvZHkgPSB7InZlcnNpb24iOjEsIm1lc3NhZ2VfdHlwZSI6NDY4LCJtZXNzYWdlX2lkIjo0MSwiYm9keSI6W3sibWVzc2FnZV90eXBlIjo0NjgsInNlcnZlcl9vcGVuX21lc3NlbmdlciI6eyJjb250YWN0c191c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbMzMwLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDIzMCw2NTAsODAwLDUwMV0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjoxMDAsImhlaWdodCI6MTAwfX19LCJjaGF0X3VzZXJfZmllbGRfZmlsdGVyIjp7InByb2plY3Rpb24iOlszMzAsMzMxLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDI5MCwyOTEsMzEwLDMwMSwzMDIsNjgwLDMwMywzMDQsMjEwLDIzMCw3MzEsNjUwLDU3MF0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjozMDAsImhlaWdodCI6MzAwfX19LCJpbml0aWFsX3NjcmVlbl91c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbNDEwLDQ5MCw0NzEsODAwXSwidW5pdGVkX2ZyaWVuZHNfZmlsdGVyIjpbeyJzZWN0aW9uX3R5cGUiOjF9XX0sInVzZXJfaWQiOmlkfX1dfTsNCg0KCQl2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJYm90Ll9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpLnRoZW4oZnVuY3Rpb24oY2hhdCl7DQoJCQkJY2hhdCA9IGNoYXQuYm9keVswXS5jbGllbnRfb3Blbl9tZXNzZW5nZXIuYWN0aXZlX2NoYXQuaW5pdGlhbF9jaGF0X3NjcmVlbjsNCg0KCQkJCXJlc29sdmUoY2hhdCAhPSB1bmRlZmluZWQgJiYgY2hhdC50eXBlID09IDIpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KCXNlbmRNZXNzYWdlOiBmdW5jdGlvbihpZCl7DQoJCXZhciB1cmwgPSAiL2FwaS5waHRtbD9TRVJWRVJfU0VORF9DSEFUX01FU1NBR0UiOw0KDQoJCXZhciBib2R5ID0geyJ2ZXJzaW9uIjoxLCJtZXNzYWdlX3R5cGUiOjEwNCwibWVzc2FnZV9pZCI6MTQsImJvZHkiOlt7Im1lc3NhZ2VfdHlwZSI6MTA0LCJjaGF0X21lc3NhZ2UiOnsibXNzZyI6d2luZG93Lm9wZW5lciwibWVzc2FnZV90eXBlIjoxLCJ1aWQiOiIxNDg0MTg3OTc4NTIwIiwiZnJvbV9wZXJzb25faWQiOiIyMjc1NjIyMjQiLCJ0b19wZXJzb25faWQiOmlkLCJyZWFkIjpmYWxzZSwiY2hhdF9ibG9ja19pZCI6Mn19XX07DQoNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCWJvdC5fc2VuZFJlcXVlc3QodXJsLCBib2R5KS50aGVuKGZ1bmN0aW9uKHVzZXIpew0KCQkJCXJlc29sdmUodHJ1ZSk7DQoJCQl9KTsNCgkJfSk7DQoJCXJldHVybiBwcm9taXNlOw0KCX0sDQoJZ2V0VXNlcjogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX0dFVF9VU0VSIjsNCg0KCQl2YXIgYm9keSA9IHsiJGdwYiI6ImJhZG9vLmJtYS5CYWRvb01lc3NhZ2UiLCJ2ZXJzaW9uIjoxLCJtZXNzYWdlX3R5cGUiOjQwMywibWVzc2FnZV9pZCI6NiwiYm9keSI6W3siJGdwYiI6ImJhZG9vLmJtYS5NZXNzYWdlQm9keSIsIm1lc3NhZ2VfdHlwZSI6NDAzLCJzZXJ2ZXJfZ2V0X3VzZXIiOnsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJHZXRVc2VyIiwidXNlcl9pZCI6aWQsImNsaWVudF9zb3VyY2UiOjIsInVzZXJfZmllbGRfZmlsdGVyIjp7IiRncGIiOiJiYWRvby5ibWEuVXNlckZpZWxkRmlsdGVyIiwicHJvamVjdGlvbiI6WzgwMCwzNzAsMjAwLDIzMCwyMTAsMzAsMzYwLDkzLDMwMSwzMDIsNjgwLDMwMywzMDQsMjUwLDYwMCwyOTAsMjkxLDYxMCwzMTAsNjkwLDY5MSw2OTIsNjkzLDQ0MCwzMTEsNDkwLDY2MCw2NTAsNDYwLDc1MCw3MzEsNzMwLDEwMCwzNDAsNTgwLDU3MCw0MTAsNDIwLDQ4MCw5MCw0NzAsNzQyLDc0MSw3NDAsNTUwLDY4MSw2NzAsODcwLDMzMCwzMzEsMjYwLDUzMCw1NDBdLCJyZXF1ZXN0X2FsYnVtcyI6W3siJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJHZXRBbGJ1bSIsInByZXZpZXdfc2l6ZSI6eyIkZ3BiIjoiYmFkb28uYm1hLlBob3RvU2l6ZSIsImhlaWdodCI6MTgwLCJ3aWR0aCI6MTgwfSwiYWxidW1fdHlwZSI6Mn0seyIkZ3BiIjoiYmFkb28uYm1hLlNlcnZlckdldEFsYnVtIiwicHJldmlld19zaXplIjp7IiRncGIiOiJiYWRvby5ibWEuUGhvdG9TaXplIiwiaGVpZ2h0IjoxODAsIndpZHRoIjoxODB9LCJhbGJ1bV90eXBlIjo0fV0sInVuaXRlZF9mcmllbmRzX2ZpbHRlciI6W3siJGdwYiI6ImJhZG9vLmJtYS5Vbml0ZWRGcmllbmRzRmlsdGVyIiwiY291bnQiOjUsInNlY3Rpb25fdHlwZSI6M30seyIkZ3BiIjoiYmFkb28uYm1hLlVuaXRlZEZyaWVuZHNGaWx0ZXIiLCJjb3VudCI6NSwic2VjdGlvbl90eXBlIjoxfSx7IiRncGIiOiJiYWRvby5ibWEuVW5pdGVkRnJpZW5kc0ZpbHRlciIsImNvdW50Ijo1LCJzZWN0aW9uX3R5cGUiOjJ9XSwicmVxdWVzdF9pbnRlcmVzdHMiOnsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJJbnRlcmVzdHNHZXQiLCJ1c2VyX2lkIjppZCwibGltaXQiOjUwMH19LCJ2aXNpdGluZ19zb3VyY2UiOnsiJGdwYiI6ImJhZG9vLmJtYS5Qcm9maWxlVmlzaXRpbmdTb3VyY2UiLCJwZXJzb25faWQiOmlkLCJzb3VyY2VfZm9sZGVyIjoyNSwidmlzaXRpbmdfc291cmNlIjoyfX19XX07DQoNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCWJvdC5fc2VuZFJlcXVlc3QodXJsLCBib2R5KS50aGVuKGZ1bmN0aW9uKHVzZXIpew0KCQkJCXVzZXIgPSB1c2VyLmJvZHlbMF0udXNlcjsNCg0KCQkJCXJlc29sdmUodXNlcik7DQoJCQl9KTsNCgkJfSk7DQoJCXJldHVybiBwcm9taXNlOw0KCX0sDQoNCglnZXRVc2VyczogZnVuY3Rpb24ocGFnZSA9IDApew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX0dFVF9VU0VSX0xJU1RfV0lUSF9TRVRUSU5HUyI7DQoNCgkJYm9keSA9IHsidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo0MTYsIm1lc3NhZ2VfaWQiOjI0LCJib2R5IjpbeyJtZXNzYWdlX3R5cGUiOjUwMiwic2VydmVyX2dldF9zZWFyY2hfc2V0dGluZ3MiOnsiY29udGV4dF90eXBlIjoyfX0seyJtZXNzYWdlX3R5cGUiOjI0NSwic2VydmVyX2dldF91c2VyX2xpc3QiOnsiZm9sZGVyX2lkIjoyNSwidXNlcl9maWVsZF9maWx0ZXIiOnsicHJvamVjdGlvbiI6WzI1MCwyMDAsMjEwLDIzMCwzMTAsMzMwLDUzMCw1NDAsMzQwLDMzMSw2ODAsMjkwLDI5MSwzMDEsMzAzLDMwNCwzMDIsMjYwXSwicHJvZmlsZV9waG90b19zaXplIjp7InNxdWFyZV9mYWNlX3Bob3RvX3NpemUiOnsid2lkdGgiOjE4MCwiaGVpZ2h0IjoxODB9fX0sIm9mZnNldCI6cGFnZSoxMDAsInByZWZlcnJlZF9jb3VudCI6MTAwLCJwcm9tb19ibG9ja19yZXF1ZXN0X3BhcmFtcyI6W3siY291bnQiOjEsInBvc2l0aW9uIjoyfSx7ImNvdW50IjoxLCJwb3NpdGlvbiI6MX1dLCJmaWx0ZXIiOlswXX19XX07DQoNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCWJvdC5fc2VuZFJlcXVlc3QodXJsLCBib2R5KS50aGVuKGZ1bmN0aW9uKHVzZXJzKXsNCgkJCQl2YXIgcGFnZV9jb3VudCA9IHVzZXJzLmJvZHlbMV0uY2xpZW50X3VzZXJfbGlzdC50b3RhbF9jb3VudCAvIDEwMDsNCgkJCQl1c2VycyA9IHVzZXJzLmJvZHlbMV0uY2xpZW50X3VzZXJfbGlzdC5zZWN0aW9uWzBdLnVzZXJzOw0KDQoJCQkJaWYocGFnZSA9PSAwKXsNCgkJCQkJcHJvbWlzZXMgPSBbXTsNCg0KCQkJCQlmb3IoaSA9IDE7IGkgPCBwYWdlX2NvdW50OyBpKyspew0KCQkJCQkJcHJvbWlzZXMucHVzaChib3QuZ2V0VXNlcnMoaSkpOw0KCQkJCQl9DQoNCgkJCQkJUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24obW9yZV91c2Vycyl7DQoJCQkJCQltb3JlX3VzZXJzLmZvckVhY2goZnVuY3Rpb24obW9yZV91c2Vyc191bml0KXsNCgkJCQkJCQl1c2VycyA9IHVzZXJzLmNvbmNhdChtb3JlX3VzZXJzX3VuaXQpOw0KCQkJCQkJfSk7DQoNCgkJCQkJCXJlc29sdmUodXNlcnMpOw0KCQkJCQl9KTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJcmVzb2x2ZSh1c2Vycyk7DQoJCQkJfQ0KCQkJfSk7DQoJCX0pOw0KDQoJCXJldHVybiBwcm9taXNlOw0KCX0sDQoNCgl2b3RlOiBmdW5jdGlvbihpZCl7DQoJCXZhciB1cmwgPSAiL2FwaS5waHRtbD9TRVJWRVJfRU5DT1VOVEVSU19WT1RFIjsNCg0KCQl2YXIgYm9keSA9IHsiJGdwYiI6ImJhZG9vLmJtYS5CYWRvb01lc3NhZ2UiLCJ2ZXJzaW9uIjoxLCJtZXNzYWdlX3R5cGUiOjgwLCJtZXNzYWdlX2lkIjo1NiwiYm9keSI6W3siJGdwYiI6ImJhZG9vLmJtYS5NZXNzYWdlQm9keSIsIm1lc3NhZ2VfdHlwZSI6ODAsInNlcnZlcl9lbmNvdW50ZXJzX3ZvdGUiOnsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJFbmNvdW50ZXJzVm90ZSIsInBlcnNvbl9pZCI6aWQsInZvdGUiOjIsInZvdGVfc291cmNlIjo2NX19XX07DQoNCgkJcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSk7DQoJfSwNCg0KCV9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpew0KCQl2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KCQkJeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpOw0KCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdqc29uJyk7DQoNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVNlc3Npb24taWQnLCBCLlNlc3Npb24uZ2V0U2Vzc2lvbklkKCkpOw0KCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtVXNlci1pZCcsIEIuU2Vzc2lvbi5nZXRVc2VySWQoKSk7DQoNCgkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoZnVuY3Rpb24oKSB7DQoJCQkJaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHsNCgkJCQkJcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpKTsNCgkJCQl9DQoJCQl9KTsNCg0KCQkJeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpOw0KCQl9KTsNCg0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJYWRkTWVudUl0ZW06IGZ1bmN0aW9uKHRleHQsIGljb24sIGJvdEZ1bmN0aW9uTmFtZSkgew0KCQl2YXIgaHRtbCA9ICdcDQoJCSAgICA8ZGl2IG9uY2xpY2s9IndpbmRvdy5ib3Que3tib3RGdW5jdGlvbk5hbWV9fSgpOyIgc3R5bGU9ImN1cnNvcjogcG9pbnRlciIgY2xhc3M9InNpZGViYXItbWVudV9faXRlbSBmcmllbmRzXyI+XA0KCQkJCTxpIGNsYXNzPSJpY29uIGljb24tLXhzbSI+XA0KCQkJCQk8c3ZnIGNsYXNzPSJpY29uLXN2ZyI+PHVzZSB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeGxpbms6aHJlZj0ie3tpY29ufX0iPjwvdXNlPjwvc3ZnPlwNCgkJCQkJPHNwYW4gY2xhc3M9Im1hcmsgbWFyay0tc20gbWFyay0tcmVkIGludmlzaWJsZSI+MDwvc3Bhbj5cDQoJCQkJPC9pPlwNCgkJCQk8YiBjbGFzcz0ic2lkZWJhci1tZW51X19pdGVtLXR4dCBzaWRlYmFyX19lbC1oaWRkZW4iPnt7dGV4dH19PC9iPlwNCgkJCQk8c3BhbiBjbGFzcz0ibWFyayBtYXJrLS1yZWQgaW52aXNpYmxlIj4wPC9zcGFuPlwNCgkJCTwvZGl2Pic7DQoNCgkJaHRtbCA9IGh0bWwNCgkJCS5yZXBsYWNlKCd7e2JvdEZ1bmN0aW9uTmFtZX19JywgYm90RnVuY3Rpb25OYW1lKQ0KCQkJLnJlcGxhY2UoJ3t7aWNvbn19JywgaWNvbikNCgkJCS5yZXBsYWNlKCd7e3RleHR9fScsIHRleHQpOw0KDQoJCXZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQoJCWVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsNCg0KCQl2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInNpZGViYXItbWVudSIpWzBdOw0KCQltZW51LmFwcGVuZENoaWxkKGVsZW1lbnQpOw0KCX0sDQoNCglzZXRPcGVuZXI6IGZ1bmN0aW9uKCl7DQoJCXZhciBvcGVuZXIgPSBwcm9tcHQoIk9wZW5lcj8gIiwgd2luZG93Lm9wZW5lcik7DQoNCgkJd2luZG93Lm9wZW5lciA9IG9wZW5lcjsNCgkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9wZW5lciIsIG9wZW5lcik7DQoJfSwNCg0KCW1hc3NMaWtlOiBmdW5jdGlvbigpew0KCQlib3QuZ2V0VXNlcnMoKS50aGVuKGZ1bmN0aW9uKGRhdGEpew0KCQkJdXNlcnMgPSBkYXRhLmZpbHRlcihmdW5jdGlvbih1c2VyKSB7DQoJCQkJcmV0dXJuIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9PSAi0JHRi9C70LAg0L7QvdC70LDQudC9INCx0L7Qu9GM0YjQtSDQvdC10LTQtdC70Lgg0L3QsNC30LDQtCINCgkJCQkJJiYgdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT09ICLQkdGL0LvQsCDQvtC90LvQsNC50L0g0LHQvtC70YzRiNC1INC80LXRgdGP0YbQsCDQvdCw0LfQsNC0IjsNCgkJCX0pOw0KDQogICAgICAvLyDQkdGL0LvQsCDQvtC90LvQsNC50L0g0LHQvtC70YzRiNC1INC80LXRgdGP0YbQsCDQvdCw0LfQsNC0DQogICAgICAvLyDQkdGL0LvQsCDQvtC90LvQsNC50L0g0LHQvtC70YzRiNC1INC90LXQtNC10LvQuCDQvdCw0LfQsNC0DQoNCgkJCXVzZXJzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLnVzZXJfaWR9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcil7DQoJCQkJaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXItIit1c2VyKSAhPSB1bmRlZmluZWQpew0KCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5zbGljZSgwLCAxMDApOw0KDQoJCQl2YXIgdXNlckRldGFpbHNQcm9taXNlcyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyX2lkKXsNCgkJCQlyZXR1cm4gYm90LmdldFVzZXIodXNlcl9pZCk7DQoJCQl9KTsNCg0KCQkJUHJvbWlzZS5hbGwodXNlckRldGFpbHNQcm9taXNlcykudGhlbihmdW5jdGlvbih1c2Vycyl7DQoJCQkJdmFyIGNhcHRjaGEgPSBmYWxzZTsNCg0KCQkJCXVzZXJzID0gdXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpew0KCQkJCQlpZih1c2VyID09IHVuZGVmaW5lZCl7DQoJCQkJCQljYXB0Y2hhID0gdHJ1ZTsNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmKHVzZXIubXlfdm90ZSA9PSAxKXsNCgkJCQkJCXJldHVybiB0cnVlOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXItIiArIHVzZXIudXNlcl9pZCwgdHJ1ZSk7DQoNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCX0pOw0KDQoJCQkJaWYoY2FwdGNoYSl7DQoJCQkJCWFsZXJ0KCJTb2x2ZSBjYXB0Y2hhISAiKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCg0KCQkJCWNvbnNvbGUubG9nKHVzZXJzLmxlbmd0aCArICIgdXNlcnMgdG8gbGlrZSEgIik7DQoNCgkJCQlsaWtlX3Byb21pc2VzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiBib3Qudm90ZSh1c2VyLnVzZXJfaWQpfSk7DQoNCgkJCQlQcm9taXNlLmFsbChsaWtlX3Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKGRhdGEpew0KCQkJCQl2YXIgbGlrZXNfY291bnQgPSAwOw0KDQoJCQkJCWRhdGEuZm9yRWFjaChmdW5jdGlvbihsaWtlLCBrZXkpew0KCQkJCQkJaWYobGlrZS5ib2R5WzBdLm1lc3NhZ2VfdHlwZSAhPSAxKXsNCgkJCQkJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlci0iICsgdXNlcnNba2V5XS51c2VyX2lkLCB0cnVlKTsNCg0KCQkJCQkJCWxpa2VzX2NvdW50Kys7DQoJCQkJCQl9DQoJCQkJCX0pOw0KDQoJCQkJCWFsZXJ0KCJMaWtlZCAiICsgbGlrZXNfY291bnQgKyAiIHVzZXJzISAiKTsNCgkJCQl9KTsNCgkJCX0pOw0KCQl9KTsNCgl9LA0KDQoJbWFzc0NoYXQ6IGZ1bmN0aW9uKCl7DQoJCWJvdC5nZXRVc2VycygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7DQoJCQl1c2VycyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAib25saW5lX3N0YXR1c190ZXh0IiAmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAiINCR0YvQu9CwINC+0L3Qu9Cw0LnQvSDQsdC+0LvRjNGI0LUg0L3QtdC00LXQu9C4INC90LDQt9Cw0LQifSk7DQoNCgkJCXVzZXJzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLnVzZXJfaWR9KTsNCg0KCQkJdmFyIGNoYXRzID0gdXNlcnMubWFwKGZ1bmN0aW9uKGlkKXsNCgkJCQlyZXR1cm4gYm90LmdldENoYXQoaWQpOw0KCQkJfSk7DQoNCgkJCVByb21pc2UuYWxsKGNoYXRzKS50aGVuKGZ1bmN0aW9uKGNoYXRzKXsNCgkJCQl1c2VycyA9IHVzZXJzLmZpbHRlcihmdW5jdGlvbihpZCwga2V5KXsNCgkJCQkJcmV0dXJuIGNoYXRzW2tleV07DQoJCQkJfSk7DQoNCgkJCQlhbGVydCgiU2VuZGluZyBtZXNzYWdlIHRvICIrdXNlcnMubGVuZ3RoKyIgcGVvcGxlISAiKTsNCg0KCQkJCXVzZXJzLm1hcChmdW5jdGlvbihpZCl7DQoJCQkJCWJvdC5zZW5kTWVzc2FnZShpZCk7DQoJCQkJfSkNCgkJCX0pOw0KCQl9KTsNCgl9DQp9Ow0KDQp2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpew0KCWlmKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInNpZGViYXItbWVudSIpWzBdICE9PSB1bmRlZmluZWQpew0KCQljbGVhckludGVydmFsKGludGVydmFsKTsNCgkJYm90LmFkZE1lbnVJdGVtKCdNYXNzIGxpa2UnLCAnI2ljb24taGVhcnQnLCAnbWFzc0xpa2UnKTsNCgkJYm90LmFkZE1lbnVJdGVtKCdNYXNzIGNoYXQnLCAnI2ljb24tY2hhdCcsICdtYXNzQ2hhdCcpOw0KCQlib3QuYWRkTWVudUl0ZW0oJ1NldCBvcGVuZXInLCAnI2ljb24tY2hhdCcsICdzZXRPcGVuZXInKTsNCgl9DQp9LCAxMDAwKTsNCg==");

location.href="javascript:(function(){" + code + "})()";
